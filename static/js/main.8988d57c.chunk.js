(this.webpackJsonp21block=this.webpackJsonp21block||[]).push([[0],{174:function(e,t,a){e.exports=a(284)},182:function(e,t,a){},183:function(e,t,a){},219:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},266:function(e,t,a){},283:function(e,t,a){},284:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(8),l=a.n(c),s=a(143),o=a(19),i=a(55),u=(a(182),a(183),a(7)),m=a(37),E=a(15),d=a.n(E),p=a(45),b=a(79),g=a.n(b),f=a(294),h=a(285),v=g.a.create({baseURL:"https://conduit.productionready.io/api"});v.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.common.Authorization="Token ".concat(t)),e}));var _=v,O=Object(f.a)("LOGIN_REQUEST"),w=Object(f.a)("LOGIN_SUCCESS"),j=Object(f.a)("LOGIN_FAILURE"),S=Object(f.a)("LOGOUT"),N=Object(f.a)("REGISTER_REQUEST"),k=Object(f.a)("REGISTER_SUCCESS"),C=Object(f.a)("REGISTER_FAILURE"),y=Object(f.a)("CREATE_REQUEST"),T=Object(f.a)("CREATE_SUCCESS"),L=Object(f.a)("CREATE_FAILURE"),A=Object(f.a)("GET_ARTICLES_REQUEST"),x=Object(f.a)("GET_ARTICLES_SUCCESS"),I=Object(f.a)("GET_ARTICLES_FAILURE"),R=Object(f.a)("GET_TOTAL_ARTICLES_COUNT"),U=Object(f.a)("SWITCH_PAGE"),q=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var a,r,n,c,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O()),e.prev=1,a=localStorage.getItem("token"),e.next=5,g.a.get("https://conduit.productionready.io/api/user",{headers:{Authorization:"Token ".concat(a)}});case 5:200===(r=e.sent).status&&(n=r.data.user,c=n.username,l=n.token,t(w({username:c,token:l}))),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(1),t(j()),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},B=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var r,n,c,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(O()),t.prev=1,t.next=4,g.a.post("https://conduit.productionready.io/api/users/login",{user:e});case 4:r=t.sent,n=r.data.user,c=n.token,l=n.username,200===r.status&&(h.a.success("\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c ".concat(l)),localStorage.setItem("token",c),a(w({username:l,token:c}))),t.next=14;break;case 9:throw t.prev=9,t.t0=t.catch(1),h.a.error("\u041f\u0430\u0440\u0430 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"),a(j()),t.t0;case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},G=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("token"),t(S());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(N()),t.prev=1,t.next=4,g.a.post("https://conduit.productionready.io/api/users",{user:e});case 4:200===t.sent.status&&(h.a.success("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b!"),a(k())),t.next=13;break;case 8:throw t.prev=8,t.t0=t.catch(1),h.a.error("Email \u0438\u043b\u0438 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b!"),a(C()),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},W=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(y()),console.log(e),t.prev=2,t.next=5,_.post("/articles",e);case 5:r=t.sent,console.log(r),200===r.status&&(h.a.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!"),a(T(r.data.article)),z(1)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),a(L()),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},z=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var r,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(A()),t.prev=1,r=10*(e-1),t.next=5,_.get("/articles?limit=10&offset=".concat(r));case 5:n=t.sent,console.log(n.data),200===n.status&&(a(x(n.data.articles)),a(R(n.data.articlesCount))),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),a(L());case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},J="/Blog-platform-with-router",V="".concat(J,"/login"),D="".concat(J,"/register"),F="".concat(J,"/articles"),Q="".concat(F,"/add"),X=a(44),H=a(290),$=a(121),K=a(286),M=(a(88),a(219),{signin:B});var Y=Object(o.b)((function(e){return{username:e.user.username,token:e.user.token,signin:B,userStatus:e.user}}),M)((function(e){var t=e.signin;return n.a.createElement("div",{className:"login-form"},n.a.createElement(X.b,{initialValues:{email:"",password:""},onSubmit:function(e){return t(e)}},(function(e){var t=e.values,a=e.errors,r=e.touched,c=e.handleChange,l=e.handleBlur,s=e.isSubmitting;return n.a.createElement("div",{className:s?"submitting-form":""},n.a.createElement(X.a,{className:"login-form___login"},n.a.createElement("label",null,"Email:",n.a.createElement(H.a,{required:!0,className:a.email&&r.email&&"error",name:"email",onChange:c,onBlur:l,value:t.email})),n.a.createElement("label",null,"\u041f\u0430\u0440\u043e\u043b\u044c:",n.a.createElement(H.a.Password,{required:!0,className:a.password&&r.password&&"error",name:"password",onChange:c,onBlur:l,value:t.password})),n.a.createElement($.a,{className:"submit-button",type:"primary",htmlType:"submit"},"\u0412\u043e\u0439\u0442\u0438")),n.a.createElement(K.a,null),n.a.createElement(m.b,{className:"login-form__register",to:D},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))})))})),Z=(a(256),a(86)),ee=Z.a().shape({username:Z.b().max(50,"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435 \u0438\u043c\u044f").required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),email:Z.b().email("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 email").required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),password:Z.b().min(8,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(40,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f")}),te={registerUser:P};var ae=Object(o.b)((function(e){return{registerUser:P,registerStatus:e.registerStatus,token:e.user.token}}),te)((function(e){var t=e.registerUser;return"register-success"===e.registerStatus?n.a.createElement(u.a,{to:V}):n.a.createElement("div",{className:"register-form"},n.a.createElement(X.b,{initialValues:{username:"",email:"",password:""},validationSchema:ee,onSubmit:function(e){t(e)}},(function(e){var t=e.values,a=e.errors,r=e.touched,c=e.handleChange,l=e.handleBlur,s=e.isSubmitting;return n.a.createElement("div",{className:s?"submitting-form":""},n.a.createElement(X.a,{className:"register-form___registration"},n.a.createElement("label",null,"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",n.a.createElement(H.a,{className:a.username&&r.username&&"error",required:!0,name:"username",onChange:c,onBlur:l,value:t.username})),n.a.createElement("label",null,"Email:",n.a.createElement(H.a,{className:a.email&&r.email&&"error",required:!0,name:"email",onChange:c,onBlur:l,value:t.email})),a.email&&r.email&&n.a.createElement("div",{className:"input-error"},a.email),n.a.createElement("label",null,"\u041f\u0430\u0440\u043e\u043b\u044c:",n.a.createElement(H.a.Password,{className:a.password&&r.password&&"error",required:!0,name:"password",onChange:c,onBlur:l,value:t.password}),a.password&&r.password&&n.a.createElement("div",{className:"input-error"},a.password)),n.a.createElement($.a,{className:"submit-button",type:"primary",htmlType:"submit"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")),n.a.createElement(K.a,null),n.a.createElement(m.b,{className:"register-form__signin",as:$.a,to:V},"\u0412\u043e\u0439\u0442\u0438"))})))})),re=a(288),ne=a(293),ce=a(291),le=a(292),se=a(295),oe=a(297),ie=a(298),ue=a(287),me=a(296),Ee=(a(257),{signout:G});var de=Object(o.b)((function(e){return{user:e.user,userName:e.user.username,loggedIn:e.loggedIn,signout:G}}),Ee)((function(e){var t=e.userName,a=e.signout,r=e.user;return n.a.createElement("header",{className:"header"},n.a.createElement("div",null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",n.a.createElement(se.a,null),"requested"===r?n.a.createElement(ue.a,null):t),n.a.createElement($.a,{className:"header__logout",onClick:a,to:J},n.a.createElement(me.a,null)," \u0412\u044b\u0439\u0442\u0438"))})),pe=(a(266),{getArticleList:z,switchPage:U});var be=Object(o.b)((function(e){return{articleList:e.articleList,getArticleList:z,currentPage:e.currentPage,switchPage:U,articlesCount:e.articlesCount}}),pe)((function(e){var t=e.articleList,a=e.getArticleList,r=e.switchPage,c=e.articlesCount,l=e.currentPage,s=function(){return n.a.createElement("div",{className:"skeleton-loader"},n.a.createElement(ce.a,{active:!0,size:"large",className:"main__wall__loading"}))};return n.a.createElement("div",{onLoad:void(0===t.length&&a(l)),className:"main"},n.a.createElement(de,null),n.a.createElement("div",{className:"main__wall"},n.a.createElement(m.b,{to:Q,className:"main__wall__create"},n.a.createElement(ie.a,null),"\u0421\u041e\u0417\u0414\u0410\u0422\u042c"),Array.isArray(t)?t.map((function(e){return t=e.title,a=e.body,r=e.slug,c=e.author.username,l=e.favoritesCount,s=e.tagList,n.a.createElement("div",{key:r,className:"main__wall__post"},n.a.createElement("h3",{className:"main__wall__post__heading"},t,n.a.createElement("p",{className:"main__wall__post__author"},"\u0410\u0432\u0442\u043e\u0440: ",n.a.createElement(se.a,null),c)),n.a.createElement("p",null,a),n.a.createElement(K.a,null),n.a.createElement("div",{className:"main__wall__post__footer"},n.a.createElement("p",null,n.a.createElement(oe.a,{twoToneColor:"#ff0000"})," ",l),n.a.createElement("div",null,s.map((function(e){return n.a.createElement(ne.a,{className:"main__wall__post__footer__tag",key:e},e)})))));var t,a,r,c,l,s})):n.a.createElement("div",null,s(),s(),s(),s(),s(),s(),s(),s(),s(),s())),n.a.createElement(re.a,{onChange:function(e){r(e),window.scrollTo(0,0),a(e)},showSizeChanger:!1,defaultCurrent:"1",defaultPageSize:"10",total:c,hideOnSinglePage:!0}),n.a.createElement(le.a,null))})),ge=a(299),fe=(a(283),H.a.TextArea),he={createArticle:W,getArticleList:z};var ve=Object(o.b)((function(e){return{userName:e.user.username,loggedIn:e.loggedIn,signout:G,createArticle:W,getArticleList:z}}),he)(Object(u.g)((function(e){var t=e.createArticle,a=e.history,r=e.getArticleList;return n.a.createElement("div",{className:"main"},n.a.createElement(de,null),n.a.createElement("main",{className:"article-form"},n.a.createElement("h2",null,n.a.createElement(m.b,{to:F},n.a.createElement(ge.a,null))," ","\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u044e"),n.a.createElement(X.b,{initialValues:{title:"",description:"",body:"",tagList:""},onSubmit:function(){var e=Object(p.a)(d.a.mark((function e(n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={title:n.title,description:n.description,body:n.body,tagList:n.tagList?n.tagList.split(" "):[]},e.next=3,t(c);case 3:r(1),a.push(F);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.values,a=(e.errors,e.touched,e.handleChange),r=e.handleBlur,c=e.isSubmitting;return n.a.createElement("div",{className:c?"submitting-form":""},n.a.createElement(X.a,{className:"login-form___login"},n.a.createElement("label",null,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a:",n.a.createElement(H.a,{required:!0,className:"title",name:"title",onChange:a,onBlur:r,value:t.title})),n.a.createElement("label",null,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:",n.a.createElement(H.a,{required:!0,className:"description",name:"description",onChange:a,onBlur:r,value:t.description})),n.a.createElement("label",null,"\u0421\u0442\u0430\u0442\u044c\u044f:",n.a.createElement(fe,{className:"body",name:"body",rows:5,onChange:a,onBlur:r,value:t.body})),n.a.createElement("label",null,"\u0422\u0435\u0433\u0438:",n.a.createElement(H.a,{className:"tagList",name:"tagList",onChange:a,onBlur:r,value:t.tagList})),n.a.createElement($.a,{className:"submit-button",type:"primary",htmlType:"submit"},"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c")))}))))}))),_e={loginWithJWT:q};var Oe,we,je,Se,Ne=Object(o.b)((function(e){return{username:e.user.username,token:e.user.token,loginWithJWT:q,userStatus:e.user,registerStatus:e.registerStatus}}),_e)((function(e){var t=e.loginWithJWT,a=e.token,r=localStorage.getItem("token");return n.a.createElement(m.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(u.d,null,n.a.createElement(u.b,{exact:!0,path:J},r||a?r&&!a?(t(r),n.a.createElement(u.a,{to:F})):n.a.createElement(u.a,{to:F}):n.a.createElement(u.a,{to:V})),n.a.createElement(u.b,{path:V,exact:!0,component:Y},r?n.a.createElement(u.a,{to:F}):null),n.a.createElement(u.b,{path:D,exact:!0,component:ae},r?n.a.createElement(u.a,{to:F}):null),n.a.createElement(u.b,{path:F,exact:!0,component:be},r?null:n.a.createElement(u.a,{to:V})),n.a.createElement(u.b,{path:Q,exact:!0,component:ve},r?null:n.a.createElement(u.a,{to:V})),n.a.createElement(u.b,{path:"*",component:function(){return"404 \u0422\u0410\u041a\u041e\u0419 \u0421\u0422\u0420\u0410\u041d\u0418\u0426\u042b \u041d\u0415 \u0421\u0423\u0429\u0415\u0421\u0422\u0412\u0423\u0415\u0422!"}}))))})),ke=a(171),Ce=a(16),ye=a(289),Te=Object(ye.a)((Oe={},Object(Ce.a)(Oe,O,(function(e){return"requested"})),Object(Ce.a)(Oe,w,(function(e,t){return t.payload})),Object(Ce.a)(Oe,j,(function(e){return"error"})),Object(Ce.a)(Oe,S,(function(e){return{}})),Oe),{}),Le=Object(ye.a)((we={},Object(Ce.a)(we,N,(function(e){return"requested"})),Object(Ce.a)(we,k,(function(e){return"register-success"})),Object(Ce.a)(we,C,(function(e){return"register-error"})),we),{}),Ae=Object(ye.a)((je={},Object(Ce.a)(je,y,(function(e){return"create-requested"})),Object(Ce.a)(je,T,(function(e,t){t.payload;return"create-succes"})),Object(Ce.a)(je,L,(function(e){return"create-error"})),je),{}),xe=Object(ye.a)((Se={},Object(Ce.a)(Se,A,(function(e){return"getting-requested"})),Object(Ce.a)(Se,x,(function(e,t){var a=t.payload;return Object(ke.a)(a)})),Object(Ce.a)(Se,I,(function(e){return"getting-error"})),Se),[]),Ie=Object(ye.a)(Object(Ce.a)({},R,(function(e,t){return t.payload})),0),Re=Object(ye.a)(Object(Ce.a)({},U,(function(e,t){return t.payload})),1),Ue=Object(i.c)({user:Te,registerStatus:Le,createArticle:Ae,articleList:xe,articlesCount:Ie,currentPage:Re});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qe=Object(i.e)(Ue,Object(i.d)(Object(i.a)(s.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));l.a.render(n.a.createElement(o.a,{classname:"store",store:qe},n.a.createElement(Ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[174,1,2]]]);
//# sourceMappingURL=main.8988d57c.chunk.js.map