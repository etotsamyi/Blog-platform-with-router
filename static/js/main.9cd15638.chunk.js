(this.webpackJsonp21block=this.webpackJsonp21block||[]).push([[0],{174:function(e,t,a){e.exports=a(284)},182:function(e,t,a){},183:function(e,t,a){},219:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},266:function(e,t,a){},283:function(e,t,a){},284:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),l=a.n(c),s=a(143),o=a(18),u=a(54),i=(a(182),a(183),a(7)),m=a(37),E=a(25),d=a.n(E),p=a(63),b=a(79),g=a.n(b),f=a(294),h=a(285),v=g.a.create({baseURL:"https://conduit.productionready.io/api"});v.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.common.Authorization="Token ".concat(t)),e}));var _=v,O=Object(f.a)("LOGIN_REQUEST"),w=Object(f.a)("LOGIN_SUCCESS"),j=Object(f.a)("LOGIN_FAILURE"),S=Object(f.a)("LOGOUT"),N=Object(f.a)("REGISTER_REQUEST"),k=Object(f.a)("REGISTER_SUCCESS"),C=Object(f.a)("REGISTER_FAILURE"),y=Object(f.a)("CREATE_REQUEST"),T=Object(f.a)("CREATE_SUCCESS"),L=Object(f.a)("CREATE_FAILURE"),I=Object(f.a)("GET_ARTICLES_REQUEST"),A=Object(f.a)("GET_ARTICLES_SUCCESS"),x=Object(f.a)("GET_ARTICLES_FAILURE"),R=Object(f.a)("GET_TOTAL_ARTICLES_COUNT"),U=Object(f.a)("SWITCH_PAGE"),q=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n,r,c,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O()),e.prev=1,a=localStorage.getItem("token"),e.next=5,g.a.get("https://conduit.productionready.io/api/user",{headers:{Authorization:"Token ".concat(a)}});case 5:200===(n=e.sent).status&&(r=n.data.user,c=r.username,l=r.token,t(w({username:c,token:l}))),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(1),t(j()),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},B=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n,r,c,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(O()),t.prev=1,t.next=4,g.a.post("https://conduit.productionready.io/api/users/login",{user:e});case 4:n=t.sent,r=n.data.user,c=r.token,l=r.username,200===n.status&&(h.a.success("\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c ".concat(l)),localStorage.setItem("token",c),a(w({username:l,token:c}))),t.next=14;break;case 9:throw t.prev=9,t.t0=t.catch(1),h.a.error("\u041f\u0430\u0440\u0430 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"),a(j()),t.t0;case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},G=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("token"),t(S());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(N()),t.prev=1,t.next=4,g.a.post("https://conduit.productionready.io/api/users",{user:e});case 4:200===t.sent.status&&(h.a.success("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b!"),a(k())),t.next=13;break;case 8:throw t.prev=8,t.t0=t.catch(1),h.a.error("Email \u0438\u043b\u0438 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b!"),a(C()),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},W=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(y()),console.log(e),t.prev=2,t.next=5,_.post("/articles",e);case 5:n=t.sent,console.log(n),200===n.status&&(h.a.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!"),a(T(n.data.article)),z(),setTimeout((function(){return window.history.back()}),1500)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),a(L()),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},z=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(I()),e.prev=1,e.next=4,_.get("/articles?limit=10");case 4:a=e.sent,console.log(a.data),200===a.status&&(t(A(a.data.articles)),t(R(a.data.articlesCount))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(L());case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},J="/Blog-platform-with-router",V="".concat(J,"/login"),D="".concat(J,"/register"),F="".concat(J,"/articles"),Q="".concat(F,"/add"),X=a(44),H=a(290),$=a(121),K=a(286),M=(a(88),a(219),{signin:B});var Y=Object(o.b)((function(e){return{username:e.user.username,token:e.user.token,signin:B,userStatus:e.user}}),M)((function(e){var t=e.signin;return r.a.createElement("div",{className:"login-form"},r.a.createElement(X.b,{initialValues:{email:"",password:""},onSubmit:function(e){return t(e)}},(function(e){var t=e.values,a=e.errors,n=e.touched,c=e.handleChange,l=e.handleBlur,s=e.isSubmitting;return r.a.createElement("div",{className:s?"submitting-form":""},r.a.createElement(X.a,{className:"login-form___login"},r.a.createElement("label",null,"Email:",r.a.createElement(H.a,{required:!0,className:a.email&&n.email&&"error",name:"email",onChange:c,onBlur:l,value:t.email})),r.a.createElement("label",null,"\u041f\u0430\u0440\u043e\u043b\u044c:",r.a.createElement(H.a.Password,{required:!0,className:a.password&&n.password&&"error",name:"password",onChange:c,onBlur:l,value:t.password})),r.a.createElement($.a,{className:"submit-button",type:"primary",htmlType:"submit"},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement(K.a,null),r.a.createElement(m.b,{className:"login-form__register",to:D},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))})))})),Z=(a(256),a(86)),ee=Z.a().shape({username:Z.b().max(50,"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435 \u0438\u043c\u044f").required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),email:Z.b().email("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 email").required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),password:Z.b().min(8,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(40,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f")}),te={registerUser:P};var ae=Object(o.b)((function(e){return{registerUser:P,registerStatus:e.registerStatus,token:e.user.token}}),te)((function(e){var t=e.registerUser;return"register-success"===e.registerStatus?r.a.createElement(i.a,{to:V}):r.a.createElement("div",{className:"register-form"},r.a.createElement(X.b,{initialValues:{username:"",email:"",password:""},validationSchema:ee,onSubmit:function(e){t(e)}},(function(e){var t=e.values,a=e.errors,n=e.touched,c=e.handleChange,l=e.handleBlur,s=e.isSubmitting;return r.a.createElement("div",{className:s?"submitting-form":""},r.a.createElement(X.a,{className:"register-form___registration"},r.a.createElement("label",null,"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",r.a.createElement(H.a,{className:a.username&&n.username&&"error",required:!0,name:"username",onChange:c,onBlur:l,value:t.username})),r.a.createElement("label",null,"Email:",r.a.createElement(H.a,{className:a.email&&n.email&&"error",required:!0,name:"email",onChange:c,onBlur:l,value:t.email})),a.email&&n.email&&r.a.createElement("div",{className:"input-error"},a.email),r.a.createElement("label",null,"\u041f\u0430\u0440\u043e\u043b\u044c:",r.a.createElement(H.a.Password,{className:a.password&&n.password&&"error",required:!0,name:"password",onChange:c,onBlur:l,value:t.password}),a.password&&n.password&&r.a.createElement("div",{className:"input-error"},a.password)),r.a.createElement($.a,{className:"submit-button",type:"primary",htmlType:"submit"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")),r.a.createElement(K.a,null),r.a.createElement(m.b,{className:"register-form__signin",as:$.a,to:V},"\u0412\u043e\u0439\u0442\u0438"))})))})),ne=a(288),re=a(293),ce=a(291),le=a(292),se=a(295),oe=a(297),ue=a(298),ie=a(287),me=a(296),Ee=(a(257),{signout:G});var de=Object(o.b)((function(e){return{user:e.user,userName:e.user.username,loggedIn:e.loggedIn,signout:G}}),Ee)((function(e){var t=e.userName,a=e.signout,n=e.user;return r.a.createElement("header",{className:"header"},r.a.createElement("div",null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",r.a.createElement(se.a,null),"requested"===n?r.a.createElement(ie.a,null):t),r.a.createElement($.a,{className:"header__logout",onClick:a,to:J},r.a.createElement(me.a,null)," \u0412\u044b\u0439\u0442\u0438"))})),pe=(a(266),{getArticleList:z,switchPage:U});var be=Object(o.b)((function(e){return{articleList:e.articleList,getArticleList:z,currentPage:e.currentPage,switchPage:U,articlesCount:e.articlesCount}}),pe)((function(e){var t=e.articleList,a=e.getArticleList,n=e.switchPage,c=e.articlesCount,l=e.currentPage,s=function(){return r.a.createElement("div",{className:"skeleton-loader"},r.a.createElement(ce.a,{active:!0,size:"large",className:"main__wall__loading"}))};return r.a.createElement("div",{onLoad:void(0===t.length&&a(l)),className:"main"},r.a.createElement(de,null),r.a.createElement("div",{className:"main__wall"},r.a.createElement(m.b,{to:Q,className:"main__wall__create"},r.a.createElement(ue.a,null),"\u0421\u041e\u0417\u0414\u0410\u0422\u042c"),Array.isArray(t)?t.map((function(e){return t=e.title,a=e.body,n=e.slug,c=e.author.username,l=e.favoritesCount,s=e.tagList,r.a.createElement("div",{key:n,className:"main__wall__post"},r.a.createElement("h3",{className:"main__wall__post__heading"},t,r.a.createElement("p",{className:"main__wall__post__author"},"\u0410\u0432\u0442\u043e\u0440: ",r.a.createElement(se.a,null),c)),r.a.createElement("p",null,a),r.a.createElement(K.a,null),r.a.createElement("div",{className:"main__wall__post__footer"},r.a.createElement("p",null,r.a.createElement(oe.a,{twoToneColor:"#ff0000"})," ",l),r.a.createElement("div",null,s.map((function(e){return r.a.createElement(re.a,{className:"main__wall__post__footer__tag",key:e},e)})))));var t,a,n,c,l,s})):r.a.createElement("div",null,s(),s(),s(),s(),s(),s())),r.a.createElement(ne.a,{onChange:function(e){return n(e)},defaultCurrent:"1",defaultPageSize:"10",total:c/10,hideOnSinglePage:!0,showSizeChanger:!0}),r.a.createElement(le.a,null))})),ge=a(299),fe=(a(283),H.a.TextArea),he={createArticle:W};var ve=Object(o.b)((function(e){return{userName:e.user.username,loggedIn:e.loggedIn,signout:G,createArticle:W}}),he)((function(e){var t=e.createArticle;return r.a.createElement("div",{className:"main"},r.a.createElement(de,null),r.a.createElement("main",{className:"article-form"},r.a.createElement("h2",null,r.a.createElement(m.b,{to:F},r.a.createElement(ge.a,null))," ","\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u044e"),r.a.createElement(X.b,{initialValues:{title:"",description:"",body:"",tagList:""},onSubmit:function(e){var a={title:e.title,description:e.description,body:e.body,tagList:e.tagList?e.tagList.split(" "):[]};t(a)}},(function(e){var t=e.values,a=(e.errors,e.touched,e.handleChange),n=e.handleBlur,c=e.isSubmitting;return r.a.createElement("div",{className:c?"submitting-form":""},r.a.createElement(X.a,{className:"login-form___login"},r.a.createElement("label",null,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a:",r.a.createElement(H.a,{required:!0,className:"title",name:"title",onChange:a,onBlur:n,value:t.title})),r.a.createElement("label",null,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:",r.a.createElement(H.a,{required:!0,className:"description",name:"description",onChange:a,onBlur:n,value:t.description})),r.a.createElement("label",null,"\u0421\u0442\u0430\u0442\u044c\u044f:",r.a.createElement(fe,{className:"body",name:"body",rows:5,onChange:a,onBlur:n,value:t.body})),r.a.createElement("label",null,"\u0422\u0435\u0433\u0438:",r.a.createElement(H.a,{className:"tagList",name:"tagList",onChange:a,onBlur:n,value:t.tagList})),r.a.createElement($.a,{className:"submit-button",type:"primary",htmlType:"submit"},"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c")))}))))})),_e={loginWithJWT:q};var Oe,we,je,Se,Ne=Object(o.b)((function(e){return{username:e.user.username,token:e.user.token,loginWithJWT:q,userStatus:e.user,registerStatus:e.registerStatus}}),_e)((function(e){var t=e.loginWithJWT,a=e.token,n=localStorage.getItem("token");return r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:J},n||a?n&&!a?(t(n),r.a.createElement(i.a,{to:F})):r.a.createElement(i.a,{to:F}):r.a.createElement(i.a,{to:V})),r.a.createElement(i.b,{path:V,exact:!0,component:Y},n?r.a.createElement(i.a,{to:F}):null),r.a.createElement(i.b,{path:D,exact:!0,component:ae},n?r.a.createElement(i.a,{to:F}):null),r.a.createElement(i.b,{path:F,exact:!0,component:be},n?null:r.a.createElement(i.a,{to:V})),r.a.createElement(i.b,{path:Q,exact:!0,component:ve},n?null:r.a.createElement(i.a,{to:V})),r.a.createElement(i.b,{path:"*",component:function(){return"404 \u0422\u0410\u041a\u041e\u0419 \u0421\u0422\u0420\u0410\u041d\u0418\u0426\u042b \u041d\u0415 \u0421\u0423\u0429\u0415\u0421\u0422\u0412\u0423\u0415\u0422!"}}))))})),ke=a(171),Ce=a(15),ye=a(289),Te=Object(ye.a)((Oe={},Object(Ce.a)(Oe,O,(function(e){return"requested"})),Object(Ce.a)(Oe,w,(function(e,t){return t.payload})),Object(Ce.a)(Oe,j,(function(e){return"error"})),Object(Ce.a)(Oe,S,(function(e){return{}})),Oe),{}),Le=Object(ye.a)((we={},Object(Ce.a)(we,N,(function(e){return"requested"})),Object(Ce.a)(we,k,(function(e){return"register-success"})),Object(Ce.a)(we,C,(function(e){return"register-error"})),we),{}),Ie=Object(ye.a)((je={},Object(Ce.a)(je,y,(function(e){return"create-requested"})),Object(Ce.a)(je,T,(function(e,t){t.payload;return"create-succes"})),Object(Ce.a)(je,L,(function(e){return"create-error"})),je),{}),Ae=Object(ye.a)((Se={},Object(Ce.a)(Se,I,(function(e){return"getting-requested"})),Object(Ce.a)(Se,A,(function(e,t){var a=t.payload;return Object(ke.a)(a)})),Object(Ce.a)(Se,x,(function(e){return"getting-error"})),Se),[]),xe=Object(ye.a)(Object(Ce.a)({},R,(function(e,t){return t.payload})),0),Re=Object(ye.a)(Object(Ce.a)({},U,(function(e,t){return t.payload})),1),Ue=Object(u.c)({user:Te,registerStatus:Le,createArticle:Ie,articleList:Ae,articlesCount:xe,currentPage:Re});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qe=Object(u.e)(Ue,Object(u.d)(Object(u.a)(s.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));l.a.render(r.a.createElement(o.a,{classname:"store",store:qe},r.a.createElement(Ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[174,1,2]]]);
//# sourceMappingURL=main.9cd15638.chunk.js.map