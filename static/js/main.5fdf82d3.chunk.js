(this.webpackJsonp21block=this.webpackJsonp21block||[]).push([[0],{154:function(e,t,a){e.exports=a(252)},162:function(e,t,a){},163:function(e,t,a){},199:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},246:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(11),l=a.n(c),s=a(131),o=a(13),i=a(44),u=(a(162),a(163),a(4)),m=a(31),E=a(21),d=a.n(E),p=a(54),b=a(69),g=a.n(b),f=a(261),v=a(253),h=g.a.create({baseURL:"https://conduit.productionready.io/api"});h.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.common.Authorization="Token ".concat(t)),e}));var _=h,O=Object(f.a)("LOGIN_REQUEST"),w=Object(f.a)("LOGIN_SUCCESS"),N=Object(f.a)("LOGIN_FAILURE"),j=Object(f.a)("LOGOUT"),S=Object(f.a)("REGISTER_REQUEST"),k=Object(f.a)("REGISTER_SUCCESS"),y=Object(f.a)("REGISTER_FAILURE"),T=Object(f.a)("CREATE_REQUEST"),L=Object(f.a)("CREATE_SUCCESS"),C=Object(f.a)("CREATE_FAILURE"),x=Object(f.a)("GET_ARTICLES_REQUEST"),I=Object(f.a)("GET_ARTICLES_SUCCESS"),A=Object(f.a)("GET_ARTICLES_FAILURE"),R=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var a,r,n,c,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O()),e.prev=1,a=localStorage.getItem("token"),e.next=5,g.a.get("https://conduit.productionready.io/api/user",{headers:{Authorization:"Token ".concat(a)}});case 5:200===(r=e.sent).status&&(n=r.data.user,c=n.username,l=n.token,t(w({username:c,token:l}))),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(1),t(N()),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var r,n,c,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(O()),t.prev=1,t.next=4,g.a.post("https://conduit.productionready.io/api/users/login",{user:e});case 4:r=t.sent,n=r.data.user,c=n.token,l=n.username,200===r.status&&(v.a.success("\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c ".concat(l)),localStorage.setItem("token",c),a(w({username:l,token:c}))),t.next=14;break;case 9:throw t.prev=9,t.t0=t.catch(1),v.a.error("\u041f\u0430\u0440\u0430 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"),a(N()),t.t0;case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},q=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("token"),t(j());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},B=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(S()),t.prev=1,t.next=4,g.a.post("https://conduit.productionready.io/api/users",{user:e});case 4:200===t.sent.status&&(v.a.success("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b!"),a(k())),t.next=13;break;case 8:throw t.prev=8,t.t0=t.catch(1),v.a.error("Email \u0438\u043b\u0438 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b!"),a(y()),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},G=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(T()),console.log(e),t.prev=2,t.next=5,_.post("/articles",e);case 5:r=t.sent,console.log(r),200===r.status&&(v.a.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!"),a(L(r.data.article)),W(),setTimeout((function(){return window.history.back()}),1500)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),a(C()),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},W=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(x()),e.prev=1,e.next=4,_.get("/articles?limit=10");case 4:a=e.sent,console.log(a.data.articles),200===a.status&&t(I(a.data.articles)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(C());case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},J="/Blog-platform-with-router",V="".concat(J,"/login"),D="".concat(J,"/register"),F="".concat(J,"/articles"),Q="".concat(F,"/add"),X=a(35),z=a(257),P=a(109),$=a(254),H=(a(76),a(199),{signin:U});var K=Object(o.b)((function(e){return{username:e.user.username,token:e.user.token,signin:U,userStatus:e.user}}),H)((function(e){var t=e.signin;return n.a.createElement("div",{className:"login-form"},n.a.createElement(X.b,{initialValues:{email:"",password:""},onSubmit:function(e){return t(e)}},(function(e){var t=e.values,a=e.errors,r=e.touched,c=e.handleChange,l=e.handleBlur,s=e.isSubmitting;return n.a.createElement("div",{className:s?"submitting-form":""},n.a.createElement(X.a,{className:"login-form___login"},n.a.createElement("label",null,"Email:",n.a.createElement(z.a,{required:!0,className:a.email&&r.email&&"error",name:"email",onChange:c,onBlur:l,value:t.email})),n.a.createElement("label",null,"\u041f\u0430\u0440\u043e\u043b\u044c:",n.a.createElement(z.a.Password,{required:!0,className:a.password&&r.password&&"error",name:"password",onChange:c,onBlur:l,value:t.password})),n.a.createElement(P.a,{className:"submit-button",type:"primary",htmlType:"submit"},"\u0412\u043e\u0439\u0442\u0438")),n.a.createElement($.a,null),n.a.createElement(m.b,{className:"login-form__register",to:D},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))})))})),M=(a(236),a(74)),Y=M.a().shape({username:M.b().max(50,"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435 \u0438\u043c\u044f").required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),email:M.b().email("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 email").required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),password:M.b().min(8,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(40,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f")}),Z={registerUser:B};var ee=Object(o.b)((function(e){return{registerUser:B,registerStatus:e.registerStatus,token:e.user.token}}),Z)((function(e){var t=e.registerUser;return"register-success"===e.registerStatus?n.a.createElement(u.a,{to:V}):n.a.createElement("div",{className:"register-form"},n.a.createElement(X.b,{initialValues:{username:"",email:"",password:""},validationSchema:Y,onSubmit:function(e){t(e)}},(function(e){var t=e.values,a=e.errors,r=e.touched,c=e.handleChange,l=e.handleBlur,s=e.isSubmitting;return n.a.createElement("div",{className:s?"submitting-form":""},n.a.createElement(X.a,{className:"register-form___registration"},n.a.createElement("label",null,"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",n.a.createElement(z.a,{className:a.username&&r.username&&"error",required:!0,name:"username",onChange:c,onBlur:l,value:t.username})),n.a.createElement("label",null,"Email:",n.a.createElement(z.a,{className:a.email&&r.email&&"error",required:!0,name:"email",onChange:c,onBlur:l,value:t.email})),a.email&&r.email&&n.a.createElement("div",{className:"input-error"},a.email),n.a.createElement("label",null,"\u041f\u0430\u0440\u043e\u043b\u044c:",n.a.createElement(z.a.Password,{className:a.password&&r.password&&"error",required:!0,name:"password",onChange:c,onBlur:l,value:t.password}),a.password&&r.password&&n.a.createElement("div",{className:"input-error"},a.password)),n.a.createElement(P.a,{className:"submit-button",type:"primary",htmlType:"submit"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")),n.a.createElement($.a,null),n.a.createElement(m.b,{className:"register-form__signin",as:P.a,to:V},"\u0412\u043e\u0439\u0442\u0438"))})))})),te=a(260),ae=a(258),re=a(259),ne=a(262),ce=a(264),le=a(265),se=a(255),oe=a(263),ie=(a(237),{signout:q});var ue=Object(o.b)((function(e){return{user:e.user,userName:e.user.username,loggedIn:e.loggedIn,signout:q}}),ie)((function(e){var t=e.userName,a=e.signout,r=e.user;return n.a.createElement("header",{className:"header"},n.a.createElement("div",null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: ",n.a.createElement(ne.a,null),"requested"===r?n.a.createElement(se.a,null):t),n.a.createElement(P.a,{className:"header__logout",onClick:a,to:J},n.a.createElement(oe.a,null)," \u0412\u044b\u0439\u0442\u0438"))})),me=(a(246),{getArticleList:W});var Ee=Object(o.b)((function(e){return{articleList:e.articleList,getArticleList:W}}),me)((function(e){var t=e.articleList,a=e.getArticleList,r=function(){return n.a.createElement("div",{className:"skeleton-loader"},n.a.createElement(ae.a,{active:!0,size:"large",className:"main__wall__loading"}))};return n.a.createElement("div",{onLoad:void(0===t.length&&a()),className:"main"},n.a.createElement(ue,null),n.a.createElement("div",{className:"main__wall"},n.a.createElement(m.b,{to:Q,className:"main__wall__create"},n.a.createElement(le.a,null),"\u0421\u041e\u0417\u0414\u0410\u0422\u042c"),Array.isArray(t)?t.map((function(e){return t=e.title,a=e.body,r=e.slug,c=e.author.username,l=e.favoritesCount,s=e.tagList,n.a.createElement("div",{key:r,className:"main__wall__post"},n.a.createElement("h3",{className:"main__wall__post__heading"},t,n.a.createElement("p",{className:"main__wall__post__author"},"\u0410\u0432\u0442\u043e\u0440: ",n.a.createElement(ne.a,null),c)),n.a.createElement("p",null,a),n.a.createElement($.a,null),n.a.createElement("div",{className:"main__wall__post__footer"},n.a.createElement("p",null,n.a.createElement(ce.a,{twoToneColor:"#ff0000"})," ",l),n.a.createElement("div",null,s.map((function(e){return n.a.createElement(te.a,{className:"main__wall__post__footer__tag",key:e},e)})))));var t,a,r,c,l,s})):n.a.createElement("div",null,r(),r(),r(),r(),r(),r())),n.a.createElement(re.a,null))})),de=a(266),pe=(a(251),z.a.TextArea),be={createArticle:G};var ge=Object(o.b)((function(e){return{userName:e.user.username,loggedIn:e.loggedIn,signout:q,createArticle:G}}),be)((function(e){var t=e.createArticle;return n.a.createElement("div",{className:"main"},n.a.createElement(ue,null),n.a.createElement("main",{className:"article-form"},n.a.createElement("h2",null,n.a.createElement(m.b,{to:F},n.a.createElement(de.a,null))," ","\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u044e"),n.a.createElement(X.b,{initialValues:{title:"",description:"",body:"",tagList:""},onSubmit:function(e){var a={title:e.title,description:e.description,body:e.body,tagList:e.tagList?e.tagList.split(" "):[]};t(a)}},(function(e){var t=e.values,a=(e.errors,e.touched,e.handleChange),r=e.handleBlur,c=e.isSubmitting;return n.a.createElement("div",{className:c?"submitting-form":""},n.a.createElement(X.a,{className:"login-form___login"},n.a.createElement("label",null,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a:",n.a.createElement(z.a,{required:!0,className:"title",name:"title",onChange:a,onBlur:r,value:t.title})),n.a.createElement("label",null,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:",n.a.createElement(z.a,{required:!0,className:"description",name:"description",onChange:a,onBlur:r,value:t.description})),n.a.createElement("label",null,"\u0421\u0442\u0430\u0442\u044c\u044f:",n.a.createElement(pe,{className:"body",name:"body",rows:5,onChange:a,onBlur:r,value:t.body})),n.a.createElement("label",null,"\u0422\u0435\u0433\u0438:",n.a.createElement(z.a,{className:"tagList",name:"tagList",onChange:a,onBlur:r,value:t.tagList})),n.a.createElement(P.a,{className:"submit-button",type:"primary",htmlType:"submit"},"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c")))}))))})),fe={loginWithJWT:R};var ve,he,_e,Oe,we=Object(o.b)((function(e){return{username:e.user.username,token:e.user.token,loginWithJWT:R,userStatus:e.user,registerStatus:e.registerStatus}}),fe)((function(e){var t=e.loginWithJWT,a=e.token,r=localStorage.getItem("token");return n.a.createElement(m.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(u.d,null,n.a.createElement(u.b,{exact:!0,path:J},r||a?r&&!a?(t(r),n.a.createElement(u.a,{to:F})):n.a.createElement(u.a,{to:F}):n.a.createElement(u.a,{to:V})),n.a.createElement(u.b,{path:V,exact:!0,component:K},r?n.a.createElement(u.a,{to:F}):null),n.a.createElement(u.b,{path:D,exact:!0,component:ee},r?n.a.createElement(u.a,{to:F}):null),n.a.createElement(u.b,{path:F,exact:!0,component:Ee},r?null:n.a.createElement(u.a,{to:V})),n.a.createElement(u.b,{path:Q,exact:!0,component:ge},r?null:n.a.createElement(u.a,{to:V})),n.a.createElement(u.b,{path:"*",component:function(){return"404 \u0422\u0410\u041a\u041e\u0419 \u0421\u0422\u0420\u0410\u041d\u0418\u0426\u042b \u041d\u0415 \u0421\u0423\u0429\u0415\u0421\u0422\u0412\u0423\u0415\u0422!"}}))))})),Ne=a(152),je=a(15),Se=a(256),ke=Object(Se.a)((ve={},Object(je.a)(ve,O,(function(e){return"requested"})),Object(je.a)(ve,w,(function(e,t){return t.payload})),Object(je.a)(ve,N,(function(e){return"error"})),Object(je.a)(ve,j,(function(e){return{}})),ve),{}),ye=Object(Se.a)((he={},Object(je.a)(he,S,(function(e){return"requested"})),Object(je.a)(he,k,(function(e){return"register-success"})),Object(je.a)(he,y,(function(e){return"register-error"})),he),{}),Te=Object(Se.a)((_e={},Object(je.a)(_e,T,(function(e){return"create-requested"})),Object(je.a)(_e,L,(function(e,t){t.payload;return"create-succes"})),Object(je.a)(_e,C,(function(e){return"create-error"})),_e),{}),Le=Object(Se.a)((Oe={},Object(je.a)(Oe,x,(function(e){return"getting-requested"})),Object(je.a)(Oe,I,(function(e,t){var a=t.payload;return Object(Ne.a)(a)})),Object(je.a)(Oe,A,(function(e){return"getting-error"})),Oe),[]),Ce=Object(i.c)({user:ke,registerStatus:ye,createArticle:Te,articleList:Le});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var xe=Object(i.e)(Ce,Object(i.d)(Object(i.a)(s.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));l.a.render(n.a.createElement(o.a,{classname:"store",store:xe},n.a.createElement(we,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[154,1,2]]]);
//# sourceMappingURL=main.5fdf82d3.chunk.js.map